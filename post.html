<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WEIRD WIZ — Post</title>
<style>
@font-face { font-family: 'OffBit'; src: url('fonts/OffBit-101Bold.otf') format('opentype'); }
@font-face { font-family: 'AuthenticSans'; src: url('fonts/60b11050899817005a227b9e.otf') format('opentype'); }
@font-face { font-family: 'GTPressura'; src: url('fonts/gt-pressura-mono-regular.ttf') format('truetype'); }
@font-face { font-family: 'MyriadPro'; src: url('fonts/MyriadPro-Regular.otf') format('opentype'); }

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #0a0a08; --fg: #e8e8d8; --red: #E8320A;
  --green: #00ff41; --blue: #3355ff; --purple: #cc44ff;
  --f-title: 'AuthenticSans', 'OffBit', monospace;
  --f-ui: 'GTPressura', monospace;
  --f-body: 'MyriadPro', sans-serif;
}

html { overflow-x: hidden; }
body { background: var(--bg); color: var(--fg); font-family: var(--f-body); overflow-x: hidden; cursor: crosshair; }

body::before {
  content: ''; position: fixed; inset: 0;
  background: repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(0,0,0,0.04) 3px, rgba(0,0,0,0.04) 4px);
  pointer-events: none; z-index: 997;
}

/* NAV — igual à home */
nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 200;
  display: flex; justify-content: space-between; align-items: flex-start;
  padding: 16px 24px; background: var(--bg);
  border-bottom: 1px solid rgba(232,50,10,0.25);
}
.nav-logo { display: flex; flex-direction: column; gap: 3px; }
.nav-logo-title { font-family: var(--f-title); font-size: 26px; color: var(--red); letter-spacing: 0.06em; line-height: 1; text-decoration: none; }
.nav-logo-sub { font-family: var(--f-ui); font-size: 8.5px; color: rgba(232,50,10,0.55); letter-spacing: 0.04em; line-height: 1.45; }
.nav-links { display: flex; align-items: center; list-style: none; gap: 0; flex-wrap: wrap; justify-content: flex-end; }
.nav-sep { color: var(--red); font-size: 11px; padding: 0 5px; opacity: 0.6; }
.nav-links a { font-family: var(--f-ui); font-size: 11.5px; color: var(--fg); text-decoration: none; letter-spacing: 0.06em; padding: 2px 4px; transition: color 0.15s; }
.nav-links a:hover { color: var(--red); }

/* LAYOUT PRINCIPAL */
.post-wrap {
  padding: 96px 24px 100px;
  display: flex;
  flex-direction: column;
  max-width: 780px;
  margin: 0 auto;
  align-items: stretch;
}

/* COLUNA ESQUERDA */
.post-main {}

.back-btn {
  display: inline-block;
  font-family: var(--f-ui);
  font-size: 10px;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--fg);
  text-decoration: none;
  border: 1px solid var(--red);
  padding: 10px 28px;
  margin-bottom: 48px;
  transition: background 0.15s, color 0.15s;
}
.back-btn:hover { background: var(--red); }

.post-tag {
  font-family: var(--f-ui);
  font-size: 8.5px;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--red);
  opacity: 0.7;
  margin-bottom: 16px;
}

.post-title {
  font-family: var(--f-title);
  font-size: clamp(36px, 5.5vw, 72px);
  letter-spacing: 0.03em;
  line-height: 1.02;
  margin-bottom: 40px;
}

.post-body {
  font-family: var(--f-body);
  font-size: 20px;
  line-height: 1.8;
  color: rgba(232,232,216,0.78);
}

.post-body p { margin-bottom: 24px; }

.post-body p:last-child { margin-bottom: 0; }

.post-body strong {
  color: var(--fg);
  font-weight: 600;
}

.post-body a {
  color: var(--red);
  text-decoration: none;
  border-bottom: 1px solid rgba(232,50,10,0.3);
}
.post-body a:hover { border-color: var(--red); }

/* separador entre parágrafos */
.post-divider {
  width: 32px;
  height: 1px;
  background: var(--red);
  opacity: 0.4;
  margin: 32px 0;
}

/* SOBRE O AUTOR — abaixo do post */
.post-sidebar {
  margin-top: 72px;
  padding-top: 48px;
  border-top: 1px solid rgba(232,50,10,0.2);
}

.sidebar-card {
  border: 2px solid var(--purple);
  background: #0f0f0d;
  overflow: hidden;
  display: grid;
  grid-template-columns: 180px 1fr;
}

.sidebar-photo {
  width: 180px;
  min-height: 180px;
  background: #1a1018;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  grid-row: 1 / 3;
}

/* placeholder foto — troca por <img> quando tiver foto real */
.sidebar-photo-placeholder {
  width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--f-ui); font-size: 9px;
  letter-spacing: 0.15em; text-transform: uppercase;
  color: rgba(255,255,255,0.12);
  background: #1a1018;
}

/* efeito duotone / filtro na foto */
.sidebar-photo img {
  width: 100%; height: 100%;
  object-fit: cover;
  display: block;
  filter: contrast(1.2) brightness(0.85) saturate(0.4);
  mix-blend-mode: normal;
}

.sidebar-info {
  padding: 24px 28px;
  border-left: 1px solid rgba(204,68,255,0.2);
}

.sidebar-name {
  font-family: var(--f-title);
  font-size: 22px;
  letter-spacing: 0.04em;
  margin-bottom: 12px;
}

.sidebar-bio {
  font-family: var(--f-ui);
  font-size: 10px;
  line-height: 1.7;
  color: rgba(232,232,216,0.55);
  letter-spacing: 0.02em;
}

.sidebar-bio a {
  color: var(--red);
  text-decoration: none;
  border-bottom: 1px solid rgba(232,50,10,0.3);
}

/* grid de imagens pequenas na sidebar */
.sidebar-imgs {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2px;
  border-top: 1px solid rgba(204,68,255,0.2);
  border-left: 1px solid rgba(204,68,255,0.2);
  align-self: end;
}

.sidebar-img-item {
  aspect-ratio: 1;
  background: #1a1018;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--f-ui); font-size: 7px;
  letter-spacing: 0.1em; color: rgba(255,255,255,0.1);
  overflow: hidden;
  cursor: crosshair;
  transition: opacity 0.15s;
}
.sidebar-img-item:hover { opacity: 0.7; }
.sidebar-img-item img { width: 100%; height: 100%; object-fit: cover; filter: contrast(1.1) saturate(0.5); }

/* post meta no rodapé */
.post-footer-meta {
  margin-top: 64px;
  padding-top: 24px;
  border-top: 1px solid rgba(232,50,10,0.15);
  display: flex;
  gap: 32px;
  flex-wrap: wrap;
}

.post-meta-item {
  display: flex; flex-direction: column; gap: 4px;
}

.post-meta-label {
  font-family: var(--f-ui); font-size: 8px;
  letter-spacing: 0.18em; text-transform: uppercase;
  color: rgba(232,50,10,0.4);
}

.post-meta-val {
  font-family: var(--f-ui); font-size: 10px;
  letter-spacing: 0.08em;
  color: rgba(232,232,216,0.45);
}

/* nav de posts */
.post-nav {
  margin-top: 48px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2px;
}

.post-nav-item {
  background: #111109;
  border: 1px solid rgba(255,255,255,0.04);
  padding: 20px;
  text-decoration: none;
  color: var(--fg);
  cursor: crosshair;
  transition: border-color 0.2s;
}
.post-nav-item:hover { border-color: var(--red); }

.post-nav-dir {
  font-family: var(--f-ui); font-size: 8px;
  letter-spacing: 0.18em; text-transform: uppercase;
  color: rgba(232,50,10,0.4); margin-bottom: 8px;
}

.post-nav-title {
  font-family: var(--f-title); font-size: 16px;
  letter-spacing: 0.04em; line-height: 1.1;
}

/* NEWSLETTER BLOCK */
.newsletter-block {
  margin-top: 64px;
  padding: 40px;
  border: 1px solid rgba(232,50,10,0.3);
  background: #0d0d0b;
  position: relative;
}
.newsletter-block::before {
  content: '';
  position: absolute; top: -1px; left: 0;
  width: 60px; height: 2px;
  background: var(--red);
}
.newsletter-eyebrow {
  font-family: var(--f-ui);
  font-size: 8.5px;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: rgba(232,50,10,0.55);
  margin-bottom: 14px;
}
.newsletter-title {
  font-family: var(--f-title);
  font-size: clamp(22px, 3.5vw, 38px);
  letter-spacing: 0.04em;
  line-height: 1.05;
  margin-bottom: 10px;
}
.newsletter-desc {
  font-family: var(--f-ui);
  font-size: 9.5px;
  letter-spacing: 0.06em;
  color: rgba(232,232,216,0.3);
  margin-bottom: 24px;
}
.newsletter-form {
  display: flex;
  gap: 2px;
  max-width: 460px;
}
.newsletter-input {
  flex: 1;
  background: var(--bg);
  border: 1px solid rgba(232,50,10,0.3);
  padding: 12px 16px;
  font-family: var(--f-ui);
  font-size: 11px;
  letter-spacing: 0.04em;
  color: var(--fg);
  outline: none;
  transition: border-color 0.15s;
  cursor: text;
}
.newsletter-input:focus { border-color: var(--red); }
.newsletter-input::placeholder { color: rgba(232,232,216,0.18); }
.newsletter-btn {
  background: var(--red);
  color: var(--fg);
  border: none;
  padding: 12px 28px;
  font-family: var(--f-ui);
  font-size: 9px;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  cursor: crosshair;
  transition: opacity 0.15s;
  white-space: nowrap;
}
.newsletter-btn:hover { opacity: 0.82; }
.newsletter-success {
  display: none;
  font-family: var(--f-ui);
  font-size: 11px;
  letter-spacing: 0.12em;
  color: var(--green);
  padding: 14px 0 2px;
}

/* FOOTER newsletter compacto */
.footer-nl {
  display: flex;
  align-items: center;
  gap: 2px;
}
.footer-nl-input {
  background: transparent;
  border: 1px solid rgba(232,50,10,0.2);
  padding: 6px 12px;
  font-family: var(--f-ui);
  font-size: 9px;
  letter-spacing: 0.06em;
  color: var(--fg);
  outline: none;
  width: 200px;
  transition: border-color 0.15s;
  cursor: text;
}
.footer-nl-input:focus { border-color: var(--red); }
.footer-nl-input::placeholder { color: rgba(232,232,216,0.18); }
.footer-nl-btn {
  background: none;
  border: 1px solid rgba(232,50,10,0.2);
  border-left: none;
  padding: 6px 10px;
  font-family: var(--f-ui);
  font-size: 11px;
  color: rgba(232,50,10,0.5);
  cursor: crosshair;
  transition: all 0.15s;
}
.footer-nl-btn:hover { border-color: var(--red); color: var(--red); }
.footer-nl-ok {
  display: none;
  font-family: var(--f-ui);
  font-size: 8.5px;
  letter-spacing: 0.12em;
  color: var(--green);
}

/* FOOTER */
footer {
  border-top: 1px solid rgba(232,50,10,0.18);
  padding: 18px 24px;
  display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px;
}
footer span { font-family: var(--f-ui); font-size: 8.5px; letter-spacing: 0.13em; text-transform: uppercase; color: rgba(232,232,216,0.14); }

/* RESPONSIVE */
@media (max-width: 600px) {
  .sidebar-card { grid-template-columns: 1fr; }
  .sidebar-photo { width: 100%; height: 200px; grid-row: auto; }
  .sidebar-imgs { grid-column: 1; border-left: none; border-top: 1px solid rgba(204,68,255,0.2); }
}
</style>
</head>
<body>

<nav>
  <div class="nav-logo">
    <a href="index.html" class="nav-logo-title">WEIRD WIZ</a>
    <span class="nav-logo-sub">a blog about art creativity<br>tech books and consciousness</span>
  </div>
  <ul class="nav-links">
    <li><span class="nav-sep">..·</span><a href="works.html">I worked on</a></li>
    <li><span class="nav-sep">:·</span><a href="posts.html">Posts</a></li>
    <li><span class="nav-sep">.·.</span><a href="drops.html">Drops</a></li>
    <li><span class="nav-sep">-·</span><a href="index.html#me">Me</a></li>
  </ul>
</nav>

<div class="post-wrap">

  <!-- COLUNA PRINCIPAL -->
  <main class="post-main" id="post-main">
    <a href="index.html" class="back-btn">← back to home</a>
    <div id="post-content">
      <div style="font-family:var(--f-ui);font-size:10px;letter-spacing:0.1em;color:rgba(232,232,216,0.3);padding-top:40px;">carregando...</div>
    </div>
  </main>

  <!-- NEWSLETTER -->
  <!-- newsletter — integrado com Brevo -->
  <div class="newsletter-block">
    <div class="newsletter-eyebrow">— receba por email</div>
    <h3 class="newsletter-title">NOVO POST?<br>VOCÊ RECEBE.</h3>
    <p class="newsletter-desc">sem spam · só quando tiver algo novo · cancele quando quiser</p>
    <form class="newsletter-form" id="nl-form-post"
          action="https://00bc7bfa.sibforms.com/serve/MUIFAP6Irrw--9y9roSCjipmIl4QR0T4wNHGL7l3E3UeY6kVH3b2sscz8ok4KT7n3UBxLtxBmrvtMMkSbyE9mfORmip7vX7y2z6PllCs5twrQmEg47eiJdgNP_mK__9s2-LLLtTCJA2qQO3fbMzyym_sdAkHL_0dMmGuC4JbQ0bTmFz11oDurorHHcJzHrxnEZEnT3V58kfQA_pSqQ=="
          method="POST"
          target="nl-iframe-post">
      <input type="email" name="EMAIL" class="newsletter-input"
             placeholder="seu@email.com" required autocomplete="email">
      <input type="hidden" name="email_address_check" value="">
      <input type="hidden" name="locale" value="pt">
      <button type="submit" class="newsletter-btn">entrar →</button>
    </form>
    <iframe name="nl-iframe-post" style="display:none;" title="newsletter"></iframe>
    <div class="newsletter-success" id="nl-success-post">✓ confirmado. até o próximo.</div>
  </div>

  <!-- SOBRE O AUTOR -->
  <aside class="post-sidebar">
    <div class="sidebar-card">

      <!-- foto — substitui o placeholder por <img src="sua-foto.jpg"> -->
      <div class="sidebar-photo">
        <div class="sidebar-photo-placeholder">foto</div>
      </div>

      <div class="sidebar-info">
        <div class="sidebar-name">Daniel Lameira</div>
        <p class="sidebar-bio">
          Sou um editor e pesquisador sobre tecnologia, arte e criatividade. Pai de um menino maravilhoso, fundador da Antofágica e da Seiva, editei muitos livros <a href="index.html#worked">(que você pode ver aqui)</a>. Criei este blog para poder registrar algumas mudanças, pensamentos e indicações de conteúdos que gosto.
        </p>
      </div>

      <!-- grid de imagens pequenas -->
      <div class="sidebar-imgs">
        <div class="sidebar-img-item">img</div>
        <div class="sidebar-img-item">img</div>
        <div class="sidebar-img-item">img</div>
      </div>

    </div>
  </aside>

</div>

<footer>
  <span>© 2025 Weird Wiz</span>
  <div class="footer-nl">
    <form id="nl-form-footer-post"
          action="https://00bc7bfa.sibforms.com/serve/MUIFAP6Irrw--9y9roSCjipmIl4QR0T4wNHGL7l3E3UeY6kVH3b2sscz8ok4KT7n3UBxLtxBmrvtMMkSbyE9mfORmip7vX7y2z6PllCs5twrQmEg47eiJdgNP_mK__9s2-LLLtTCJA2qQO3fbMzyym_sdAkHL_0dMmGuC4JbQ0bTmFz11oDurorHHcJzHrxnEZEnT3V58kfQA_pSqQ=="
          method="POST"
          target="nl-iframe-footer-post">
      <input type="email" name="EMAIL" class="footer-nl-input"
             placeholder="receba novos posts por email" required autocomplete="email">
      <input type="hidden" name="email_address_check" value="">
      <input type="hidden" name="locale" value="pt">
      <button type="submit" class="footer-nl-btn">→</button>
    </form>
    <iframe name="nl-iframe-footer-post" style="display:none;" title="newsletter footer"></iframe>
    <span class="footer-nl-ok" id="nl-ok-footer-post">✓ inscrito</span>
  </div>
  <span>made by hand</span>
</footer>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>

const POST_FILES = [
  'content/posts/how-can-ai-change-the-books.md',
  'content/posts/parents-need-to-deal-with-tech.md',
  'content/posts/thoughts-about-antifragile.md',
];

function parseFrontmatter(text) {
  const match = text.match(/^---\n([\s\S]*?)\n---/);
  if (!match) return { meta: {}, body: text };
  const meta = {};
  match[1].split('\n').forEach(line => {
    const [key, ...val] = line.split(':');
    if (key && val.length) meta[key.trim()] = val.join(':').trim().replace(/^"|"$/g, '');
  });
  return { meta, body: text.slice(match[0].length).trim() };
}

function formatDate(dateStr) {
  if (!dateStr) return '';
  const months = ['Janeiro','Fevereiro','Março','Abril','Maio','Junho','Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'];
  const d = new Date(dateStr);
  return `${months[d.getMonth()]} ${d.getFullYear()}`;
}
function formatDateShort(dateStr) {
  if (!dateStr) return '';
  const months = ['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'];
  const d = new Date(dateStr);
  return `${months[d.getMonth()]} ${d.getFullYear()}`;
}

async function loadPost() {
  const params = new URLSearchParams(window.location.search);
  const slug = params.get('slug') || 'how-can-ai-change-the-books';

  // encontra o arquivo pelo slug
  const file = POST_FILES.find(f => f.includes(slug));
  if (!file) {
    document.getElementById('post-content').innerHTML = '<p style="color:rgba(232,232,216,0.4);font-family:var(--f-ui);font-size:11px;">Post não encontrado.</p>';
    return;
  }

  const res = await fetch(file);
  const text = await res.text();
  const { meta, body } = parseFrontmatter(text);

  // título da aba
  document.title = `WEIRD WIZ – ${meta.title || 'Post'}`;

  // renderiza o conteúdo
  const content = document.getElementById('post-content');
  content.innerHTML = `
    <div class="post-tag">${meta.category || ''} · ${formatDateShort(meta.date)} · ${meta.readtime || ''}min</div>
    <h1 class="post-title">${(meta.title || '').toUpperCase()}</h1>
    <div class="post-body">${marked.parse(body)}</div>
    <div class="post-footer-meta">
      <div class="post-meta-item">
        <span class="post-meta-label">Publicado</span>
        <span class="post-meta-val">${formatDate(meta.date)}</span>
      </div>
      <div class="post-meta-item">
        <span class="post-meta-label">Categoria</span>
        <span class="post-meta-val">${meta.category || ''}</span>
      </div>
      <div class="post-meta-item">
        <span class="post-meta-label">Leitura</span>
        <span class="post-meta-val">${meta.readtime || ''} minutos</span>
      </div>
    </div>
    <div class="post-nav" id="post-nav"></div>
  `;

  // nav anterior / próximo
  const allFiles = POST_FILES;
  const idx = allFiles.indexOf(file);
  const navEl = document.getElementById('post-nav');
  if (idx > 0) {
    const prevSlug = allFiles[idx-1].split('/').pop().replace('.md','');
    const prevRes = await fetch(allFiles[idx-1]);
    const prevText = await prevRes.text();
    const { meta: prevMeta } = parseFrontmatter(prevText);
    navEl.innerHTML += `<a href="post.html?slug=${prevSlug}" class="post-nav-item"><div class="post-nav-dir">← anterior</div><div class="post-nav-title">${(prevMeta.title||'').toUpperCase()}</div></a>`;
  } else {
    navEl.innerHTML += `<div></div>`;
  }
  if (idx < allFiles.length - 1) {
    const nextSlug = allFiles[idx+1].split('/').pop().replace('.md','');
    const nextRes = await fetch(allFiles[idx+1]);
    const nextText = await nextRes.text();
    const { meta: nextMeta } = parseFrontmatter(nextText);
    navEl.innerHTML += `<a href="post.html?slug=${nextSlug}" class="post-nav-item" style="text-align:right;"><div class="post-nav-dir">próximo →</div><div class="post-nav-title">${(nextMeta.title||'').toUpperCase()}</div></a>`;
  }

  // sidebar about
  try {
    const aRes = await fetch('content/settings/about.json');
    const about = await aRes.json();
    if (about.bio) document.querySelector('.sidebar-bio').innerHTML = about.bio + (about.instagram ? ` <a href="${about.instagram}" target="_blank">↗</a>` : '');
    if (about.name) document.querySelector('.sidebar-name').textContent = about.name;
    if (about.photo) {
      const photoEl = document.querySelector('.sidebar-photo');
      photoEl.innerHTML = `<img src="${about.photo}" alt="${about.name}">`;
    }
  } catch(e) {}
}

loadPost();

// ── NEWSLETTER ─────────────────────────────────────────────────────────────
document.getElementById('nl-form-post')?.addEventListener('submit', function() {
  setTimeout(() => {
    this.style.display = 'none';
    document.getElementById('nl-success-post').style.display = 'block';
  }, 600);
});
document.getElementById('nl-form-footer-post')?.addEventListener('submit', function() {
  setTimeout(() => {
    this.style.display = 'none';
    document.getElementById('nl-ok-footer-post').style.display = 'inline';
  }, 600);
});
</script>

</body>
</html>
